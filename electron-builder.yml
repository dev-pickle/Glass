# electron-builder.yml

# Application metadata
appId: com.pickle.glass
productName: Glass

# Build settings
asar: true
artifactName: "${productName}-Setup-${version}.${ext}"
directories:
  output: "dist"

# Files to include in the app
files:
  - src/**/*
  - package.json
  - pickleglass_web/backend_node/**/*
  - '!**/node_modules/electron/**'
  - public/build/**/*

# Additional resources
extraResources:
  - from: pickleglass_web/out
    to: out
  - from: src/assets/SystemAudioDump
    to: SystemAudioDump

# Unpack specific files from ASAR archive
asarUnpack:
  - "src/assets/SystemAudioDump"

# Windows specific configuration
win:
  target: nsis
  icon: src/assets/logo.ico
  requestedExecutionLevel: asInvoker  # Changed from requireAdministrator to asInvoker
  compression: maximum
  
  # File associations
  fileAssociations:
    - ext: pglass
      name: Glass Project
      description: Glass Project File
      icon: src/assets/logo.ico

# NSIS configuration for Windows installer
nsis:
  oneClick: false
  perMachine: true
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: Glass
  deleteAppDataOnUninstall: true
  installerIcon: src/assets/logo.ico
  uninstallerIcon: src/assets/logo.ico

# Publish configuration
publish:
  provider: github
  owner: pickle-com
  repo: glass
  releaseType: draft
